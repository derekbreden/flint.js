const $=(e,t)=>{const l=(e,t)=>{e.on=e.addEventListener.bind(e),e.forEach=e=>t.forEach(e),e.$=t=>$(t,e)};if("\n"===e.substr(0,1)){let n=e;const r=t;n=n.split("\n").filter((e=>""!==e.trim())).map((e=>({text:e.trim(),level:e.match(/^([\s]*)/)[0].length})));const s=(e,t=0,l=null)=>{if(t>=e.length)return null;const n=e[t],c=(n.text.match(/\[[^\]]*\]/g)||[]).map((e=>{let[t,l]=e.slice(1,-1).split("=");if(t.startsWith("$")){const e=parseInt(t.slice(1))-1;t=r[e]}if(l)if(l.startsWith("$")){const e=parseInt(l.slice(1))-1;l=r[e]}else(l.startsWith('"')&&l.endsWith('"')||l.startsWith("'")&&l.endsWith("'"))&&(l=l.slice(1,-1));else l="";return{key:t,value:l}}));n.text=n.text.replace(/\[[^\]]*\]/g,"");const i=n.text.split(" ");let a=i[0];const o=i.slice(1).join(" ");let h=null;if(a.startsWith("$")){const e=parseInt(a.slice(1))-1,t=r[e];"string"==typeof t?h=document.createTextNode(t):Array.isArray(t)?(h=document.createDocumentFragment(),t.forEach((e=>h.appendChild(e)))):h=t}else if(h=document.createElement(a),c.forEach((e=>{!1!==e.value&&null!==e.value&&void 0!==e.value&&h.setAttribute(e.key,e.value)})),o.includes("$")){const e=o.replace(/\$\d+/g,(e=>{const t=parseInt(e.slice(1))-1;return void 0!==r[t]?r[t]:e}));"TEXTAREA"===h.tagName?h.value=e:h.innerText=e}else o.length&&(h.innerText=o);l&&l.appendChild(h);let u=!1;for(let l=t+1;l<e.length&&e[l].level>n.level;l++)u||(u=e[l].level),e[l].level===u&&s(e,l,h);return h},c=document.createElement("div");let i=!1;for(let e=0;e<n.length;e++)i||(i=n[e].level),n[e].level===i&&s(n,e,c);return 1===c.children.length?(l(c.children[0]),c.children[0]):(l(c),c)}{const n=e,r=(t||document).querySelectorAll(n);return r.forEach((e=>l(e,r))),1===r.length?r[0]:0===r.length?null:r}};
